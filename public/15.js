(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{11:function(e,t,a){"use strict";var n=a(0);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=[],n=!0,r=!1,l=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw l}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=l(Object(n.useState)(t),2),o=a[0],c=a[1];return{handleChange:function(e){e.persist(),c(function(t){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){r(e,t,a[t])})}return e}({},t,r({},e.target.name,e.target.value))})},handleSubmit:function(t){t&&t.preventDefault(),e()},setValues:c,values:o,getErrors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object.keys(e).map(function(t){return e[t].map(function(e){return e})})}}}},446:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(4),o=a.n(l),c=a(88),s=a(1),i=a(89),m=a(126),u=a(5),d=a(16),p=r.a.memo(function(e){var t=e.mapel,a=e.toggleDetail,n=e.action;return r.a.createElement("div",{className:"col-md-3 mb-3 p-1 hover1"},r.a.createElement("div",{className:"card",style:{width:"100%"}},r.a.createElement("div",{style:{position:"relative",textAlign:"center",padding:0,height:150}},t.image?r.a.createElement("img",{src:"images/mapel/".concat(t.id,".jpg"),alt:"error",style:{width:"100%",height:"100%"}}):r.a.createElement(u.b,{text:t.nama}),r.a.createElement("div",{style:{position:"absolute",top:10,left:8,textShadow:"-1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000",color:"white",paddingLeft:"0.5em",paddingRight:"0.5em"}},r.a.createElement("b",null,t.kode)),r.a.createElement("div",{style:{position:"absolute",bottom:10,right:8,textShadow:"-1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000",color:"white",paddingLeft:"0.5em",paddingRight:"0.5em"}},r.a.createElement("b",null,"private"===t.akses&&r.a.createElement("i",{className:"fas fa-lock fa-2x"})))),r.a.createElement("div",{className:"card-body"},r.a.createElement("strong",{className:"card-title"},t.nama.substring(0,25),t.nama.length>25&&r.a.createElement(m.a,{content:t.nama,background:"#fff",color:"#000",padzding:"0"},"...")),r.a.createElement("p",null,r.a.createElement("small",null,r.a.createElement("b",null,t.pengajar))),r.a.createElement("p",{className:"card-text",style:{height:"3.2em",position:"relative"}},t.keterangan&&t.keterangan.substring(0,50),t.keterangan&&t.keterangan.length>50&&"...",!t.keterangan&&"-"),r.a.createElement("span",{className:"float-right"},"joined"==n&&r.a.createElement(d.b,{to:"/mapel_siswa/".concat(t.id)}," ",r.a.createElement("button",{className:"btn btn-success btn-sm"},r.a.createElement("i",{className:"fas fa-expand"}))," "),r.a.createElement("button",{value:t.id,onClick:a,className:"btn btn-primary btn-sm mr-1"},"Detail")))))}),f=function(e){var t=e.mapels,a=e.toggleDetail,n=e.action;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},t.map(function(e){return r.a.createElement(p,{key:e.id,mapel:e,toggleDetail:a,action:n})})))};function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var N=function(e){function t(e){var a,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=b(t).call(this,e),a=!r||"object"!==g(r)&&"function"!=typeof r?v(n):r,y(v(a),"setSearch",function(e){a.setState({search:e},function(){a.loadData()})}),y(v(a),"loadData",function(){if(s.a.cek()){a.setState({fetch:!0});var e=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){y(e,t,a[t])})}return e}({},a.state.search,{type:a.state.action});o.a.get("/api/mapel-siswa?page="+a.state.page,{params:e,headers:{Authorization:"Bearer "+s.a.getToken()}}).then(function(e){e.data.meta.current_page>e.data.meta.last_page?a.setState({page:e.data.meta.last_page},function(){a.loadData()}):a.setState({mapels:e.data.data,pageData:{from:e.data.meta.from,total:e.data.meta.total,per_page:e.data.meta.per_page,pageCount:Math.ceil(e.data.meta.total/e.data.meta.per_page)},fetch:!1})}).catch(function(e){401===e.response.status?a.props.logOut("mapel_siswa",!0):a.setState({error:"server error",fetch:!1})})}else a.props.logOut("mapel_siswa",!0)}),y(v(a),"getKategori",function(){o.a.get("api/kategori").then(function(e){a.setState({kategori:e.data})})}),y(v(a),"getCount",function(){}),y(v(a),"getDetail",function(e){s.a.cek()?o.a.get("/api/mapel-detail/"+e,{headers:{Authorization:"Bearer "+s.a.getToken()}}).then(function(t){a.setState({mapel:t.data.data,id:e,modalLoading:!1})}).catch(function(e){a.setState({message:"Terjadi kesalahan, mohon <i>reload</i> aplikasi / coba beberapa saat lagi",showDetail:!1})}):a.setState({message:"mohon login ulang"})}),y(v(a),"handlePageClick",function(e){a.setState({page:e.selected+1},function(){a.loadData()})}),y(v(a),"changeData",function(e){var t=e.target.value;a.setState({action:t,mapels:[],error:""},function(){a.loadData()})}),y(v(a),"clearMessage",function(){return a.setState({message:""})}),y(v(a),"toggleDetail",function(e){var t=e.target.value;a.setState({mapel:[],modalLoading:!0,showDetail:!a.state.showDetail,id:""},function(){t&&a.getDetail(t)})}),y(v(a),"changeGroup",function(e){a.setState({group:e.target.value})}),y(v(a),"submit",function(e){if(s.a.cek()){var t="waiting"===a.state.action?"Batalkan":"joined"===a.state.action?"Keluar":e.target.value;if(confirm("".concat(t," ").concat(a.state.mapel.nama,"?"))){a.setState({modalLoading:!0});var n={mapel_id:a.state.id,group:a.state.group,action:a.state.action};o.a.post("/api/mapel-action/",n,{headers:{Authorization:"Bearer "+s.a.getToken()}}).then(function(e){console.log(a.state.mapels);var t=a.state.mapels.filter(function(e){return e.id!=a.state.id});a.setState({mapels:t,modalLoading:!1,message:"sukses",showDetail:!1,menungguCount:a.state.menungguCount+("private"===a.state.mapel.akses?1:0),bergabungCount:a.state.bergabungCount+("public"===a.state.mapel.akses?1:0)}),console.log(e.data)}).catch(function(e){e.response&&(console.log(e.response),422===e.response.request.status||e.response.request.status),a.setState({modalLoading:!1})})}}}),console.log(e.history.params),a.state={action:"joined",mapels:[],pageData:{pageCount:0},page:1,fetch:!1,error:"",message:"",kategori:[],search:{},menungguCount:0,bergabungCount:0,id:"",showDetail:!1,mapel:[],group:"",modalLoading:!1,modalMessage:""},a}var a,n,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(t,r.a.Component),a=t,(n=[{key:"componentDidMount",value:function(){this.getKategori(),this.loadData()}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("span",{className:"float-left"},r.a.createElement(u.e,{title:"Mata Pelajaran"})),r.a.createElement("span",{className:"float-right"},r.a.createElement("ul",{className:"nav float-right mt-2 mb-1"},r.a.createElement("li",{className:"nav-item"},r.a.createElement("button",{className:"btn btnnav ".concat(""===this.state.action&&"active"),onClick:this.changeData,value:""},"Tersedia")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("button",{className:"btn btnnav ".concat("waiting"===this.state.action&&"active"),onClick:this.changeData,value:"waiting"},"Menunggu (",this.state.menungguCount,")")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("button",{className:"btn btnnav ".concat("joined"===this.state.action&&"active"),onClick:this.changeData,value:"joined"},"Bergabung (",this.state.bergabungCount,")")))))),r.a.createElement("hr",{className:"mt-0"}),""!==this.state.message&&r.a.createElement(u.a,{message:this.state.message,clickHandle:this.clearMessage,html:!0}),r.a.createElement("div",{className:"row",style:{padding:0}},""===this.state.error?r.a.createElement("div",{className:"col-12",style:{padding:0}},function(){switch(e.state.action){case"delete":return"";default:return r.a.createElement(c.a,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(i.a,{kategori:e.state.kategori,loadData:e.setSearch,user:"siswa"}),r.a.createElement("div",{className:"mb-2"}),r.a.createElement(f,{action:e.state.action,mapels:e.state.mapels,toggleDetail:e.toggleDetail})))}}()):r.a.createElement("div",{className:"col-12"},r.a.createElement("p",{className:"text-danger"},this.state.error)),r.a.createElement(u.c,{loading:this.state.fetch})),r.a.createElement("div",{className:"modal",style:{display:this.state.showDetail?"block":"none"}},r.a.createElement("div",{className:"modal-dialog modal-lg",role:"document"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title"},"private"===this.state.mapel.akses&&r.a.createElement("i",{className:"fas fa-lock mr-1"}),this.state.mapel.nama),r.a.createElement("button",{type:"button",className:"close",onClick:this.toggleDetail},r.a.createElement("span",null,"×"))),r.a.createElement("div",{className:"modal-body"},0!==this.state.mapel.length&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-2"},r.a.createElement("b",null,"Kode")),r.a.createElement("div",{className:"col-md-10"},this.state.mapel.kode)),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-2"},r.a.createElement("b",null,"Kategori")),r.a.createElement("div",{className:"col-md-10"},this.state.mapel.kategori)),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-2"},r.a.createElement("b",null,"Pengajar")),r.a.createElement("div",{className:"col-md-10"},this.state.mapel.pengajar)),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-2"},r.a.createElement("b",null,"Keterangan")),r.a.createElement("div",{className:"col-md-10"},this.state.mapel.keterangan)),""==this.state.action?r.a.createElement(r.a.Fragment,null,r.a.createElement("hr",null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-2"},r.a.createElement("b",null,"Kelompok")),r.a.createElement("div",{className:"col-md-10"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("input",{type:"radio",name:"group",value:"",onChange:this.changeGroup,defaultChecked:!0})," Umum"),JSON.parse(this.state.mapel.groups).map(function(t){return r.a.createElement("div",{key:t.nama,className:"col-12"},r.a.createElement("input",{type:"radio",name:"group",value:t.nama,onChange:e.changeGroup,disabled:""!==e.state.action})," ",t.nama)}))))):"waiting"==this.state.action?r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-2"},r.a.createElement("b",null,"Kelompok")),r.a.createElement("div",{className:"col-md-10"},this.state.mapel.waiting&&this.state.mapel.waiting.group)):r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-2"},r.a.createElement("b",null,"Kelompok")),r.a.createElement("div",{className:"col-md-10"},this.state.mapel.joined_user&&this.state.mapel.joined_user.group)))),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-primary",value:"public"===this.state.mapel.akses?"Tambahkan":"Daftar",onClick:this.submit,disabled:this.state.modalLoading},"waiting"===this.state.action?"Batalkan":"joined"===this.state.action?"Keluar":"public"===this.state.mapel.akses?"Tambahkan":"Daftar",r.a.createElement(u.c,{loading:this.state.modalLoading})))))))}}])&&h(a.prototype,n),l&&h(a,l),t}();t.default=N},5:function(e,t,a){"use strict";a.d(t,"e",function(){return l}),a.d(t,"a",function(){return o}),a.d(t,"c",function(){return c}),a.d(t,"b",function(){return s}),a.d(t,"d",function(){return i});var n=a(0),r=a.n(n);function l(e){var t=e.title,a=void 0===t?"Judul Halaman":t,n=e.navs,l=void 0===n?[]:n;return r.a.createElement("div",{className:"row mt-2 mb-0"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h2",{className:"float-left"},r.a.createElement("b",null,a)),l.map(function(e,t){if(e.show)return r.a.createElement("button",{key:t,value:e.action,onClick:e.clickHandle,className:"btn ".concat(e.className?e.className:"btn-primary"," float-right ml-1")},r.a.createElement("span",{className:"fas ".concat(e.icon?e.icon:"fa-plus")})," ",r.a.createElement("span",null,e.text||""))})))}function o(e){var t=e.message,a=e.type,n=e.clickHandle,l=e.html,o=void 0!==l&&l;return r.a.createElement("div",{className:"alert alert-".concat(a||"info"),style:{overflow:"hidden"},role:"alert"},r.a.createElement("span",{className:"float-left"},o?r.a.createElement("span",{dangerouslySetInnerHTML:{__html:t}}):t),r.a.createElement("button",{className:"btn btn-xs float-right",onClick:function(){return n()}},r.a.createElement("i",{className:"fas fa-times"})))}function c(e){return e.loading?r.a.createElement("span",{className:"col-12 text-center"},r.a.createElement("i",{className:"fas fa-spinner fa-spin"})," ",e.text?e.text:"Loading..."):""}function s(e){var t=e.text,a=void 0===t?"":t,n=e.w,l=e.h,o=Math.floor(255*Math.random()),c=Math.floor(255*Math.random()),s=Math.floor(255*Math.random());return r.a.createElement("div",{style:{width:n||"100%",height:l||150,backgroundColor:"rgb(".concat(o,", ").concat(c,", ").concat(s,")"),color:"white",textShadow:"-1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000",textAlign:"middle",fontSize:60,paddingTop:30,textTransform:"uppercase"}},r.a.createElement("b",null,a.substring(0,1)," ",a.substring(a.length-1,a.length)))}function i(e){var t=e.text,a=e.success,n=void 0===a||a;return r.a.createElement("span",null,r.a.createElement("i",{className:"fas ".concat(n?"fa-check text-success":"fa-exclamation text-danger")})," ",t)}},88:function(e,t,a){"use strict";a.d(t,"a",function(){return m});var n=a(0),r=a.n(n);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=c(this,s(t).call(this,e))).state={hasError:!1,error:e.error},a}var a,n,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(t,r.a.Component),a=t,l=[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}],(n=[{key:"componentDidCatch",value:function(e,t){}},{key:"render",value:function(){return this.state.hasError?r.a.createElement("div",{style:{paddingLeft:"2%"}},r.a.createElement("h3",null,"Error"),r.a.createElement("p",null,JSON.stringify(this.state.error))):this.props.children}}])&&o(a.prototype,n),l&&o(a,l),t}()},89:function(e,t,a){"use strict";var n=a(0),r=a.n(n),l=a(11);t.a=function(e){var t=e.kategori,a=e.loadData,n=e.user,o=Object(l.a)(function(){return a(c)}),c=o.values,s=o.handleChange,i=o.handleSubmit,m=o.setValues;return r.a.createElement("form",{onSubmit:i,id:"form-search"},r.a.createElement("div",{className:"container d-flex h-100 flex-column"},r.a.createElement("div",{className:"flex-grow-1 mb-1"}),r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-md-3 mb-1"},r.a.createElement("input",{className:"form-control",placeholder:"nama",name:"nama",value:c.nama||"",onChange:s})),r.a.createElement("div",{className:"col-md-2 mb-1"},r.a.createElement("input",{className:"form-control",placeholder:"kode",name:"kode",value:c.kode||"",onChange:s})),r.a.createElement("div",{className:"col-md-2 mb-1"},r.a.createElement("select",{className:"custom-select",name:"kategori_id",onChange:s,value:c.kategori_id||""},r.a.createElement("option",{value:""},"= Pilih Kategori ="),t.map(function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.nama)}))),"siswa"!==n&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"col-md-2 mb-1"},r.a.createElement("select",{className:"custom-select",name:"status",onChange:s,value:c.status||""},r.a.createElement("option",{value:""},"= Status ="),r.a.createElement("option",{value:"aktif"},"Aktif"),r.a.createElement("option",{value:"nonaktif"},"Non aktif"))),r.a.createElement("div",{className:"col-md-2 mb-1"},r.a.createElement("select",{className:"custom-select",name:"akses",onChange:s,value:c.akses||""},r.a.createElement("option",{value:""},"= Akses ="),r.a.createElement("option",{value:"public"},"Public"),r.a.createElement("option",{value:"private"},"Private")))),r.a.createElement("div",{className:"col-md-1 mb-1"},r.a.createElement("button",{className:"btn btn-warning float-left",style:{width:"48%",padding:"0.375rem 0.5rem"},onClick:function(){return m({})}},r.a.createElement("i",{className:"fas fa-times"})),r.a.createElement("button",{className:"btn btn-success float-right",style:{width:"48%",padding:"0.375rem 0.5rem"}},r.a.createElement("i",{className:"fas fa-search"}))))))}}}]);